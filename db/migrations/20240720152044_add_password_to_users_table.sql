-- migrate:up
ALTER TABLE users
ADD COLUMN password VARCHAR(255);

ALTER TABLE users
ALTER COLUMN id SET NOT NULL;

ALTER TABLE users
ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY;

ALTER TABLE users
ADD PRIMARY KEY (id);

-- migrate:down
ALTER TABLE users
DROP COLUMN password;

ALTER TABLE users
ALTER COLUMN id DROP IDENTITY IF EXISTS;

ALTER TABLE users
DROP CONSTRAINT IF EXISTS users_pkey;

ALTER TABLE users
ALTER COLUMN id DROP NOT NULL;

